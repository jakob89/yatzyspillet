using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Yatzy
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public Yatzy mitYatzy = new Yatzy();
        public Baeger mitBaeger = new Baeger(); // her newer man en instans af en klasse op, så man kan connecte en classe ind i formen. Dette gør, at klassen nu er brugbar i nedenstående.
        public Spiller Spiller1 = new Spiller();
        public Spiller Spiller2 = new Spiller();
        public Spiller Spiller3 = new Spiller();
        public Spiller Spiller4 = new Spiller();

        

        private void buttonKastTerninger_Click(object sender, EventArgs e) // Dette er knappen Kaster Terninger
        {
            mitBaeger.RystBaeger();                                     // her kalder vi metode RystBaeger, som vi har erklæret inde i bæger. Den er brugbar, fordi vi har "new'et" den up inde i denne klasse.
            richTextBoxTerning1.Text = mitBaeger.Terning1.Øjne.ToString();  // her henviser vi til teksten i tekstboksen for den første terning. Vi beder den indeholde bægerets øjne pr. terning og konvertere to string.
            richTextBoxTerning2.Text = mitBaeger.Terning2.Øjne.ToString();
            richTextBoxTerning3.Text = mitBaeger.Terning3.Øjne.ToString();
            richTextBoxTerning4.Text = mitBaeger.Terning4.Øjne.ToString();
            richTextBoxTerning5.Text = mitBaeger.Terning5.Øjne.ToString();


            Spiller1.Navn = textBoxSpiller1.Text;
            Spiller2.Navn = textBoxSpiller2.Text;
            Spiller3.Navn = textBoxSpiller3.Text;
            Spiller4.Navn = textBoxSpiller4.Text;

            VisMuligheder();
            TurTæller();

        }



        private void checkBoxHold1_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxHold1.Checked == true)    //metode for at holde terning1 -- dette er en kontrolstruktur (?)
                mitBaeger.Terning1.HoldTerning();   //kalder metode inde fra terningen, som instruerer i at holde på terningen
            else
            {
                mitBaeger.Terning1.TagTerningMed(); // kalder metode inde fra terningen, som instruerer i at tage terningen med. 
            }
        }

        private void checkBoxHold2_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxHold2.Checked == true)    //metode for at holde terning2
                mitBaeger.Terning2.HoldTerning();
            else
            {
                mitBaeger.Terning2.TagTerningMed();
            }
        }

        private void checkBoxHold3_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxHold3.Checked == true)    //metode for at holde terning3
                mitBaeger.Terning3.HoldTerning();
            else
            {
                mitBaeger.Terning3.TagTerningMed();
            }
        }

        private void checkBoxHold4_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxHold4.Checked == true)    //metode for at holde terning4
                mitBaeger.Terning4.HoldTerning();
            else
            {
                mitBaeger.Terning4.TagTerningMed();
            }
        }

        private void checkBoxHold5_CheckedChanged(object sender, EventArgs e)
        {
            if (checkBoxHold5.Checked == true)    //metode for at holde terning5
                mitBaeger.Terning5.HoldTerning();
            else
            {
                mitBaeger.Terning5.TagTerningMed();
            }
        }

        private void DisableKastTeringer()
        {
            if(buttonKastTerninger.Enabled == true)
            { buttonKastTerninger.Enabled = false; }
        }

        private void EnableKastTerninger()
        {
            if (buttonKastTerninger.Enabled == false)
            { buttonKastTerninger.Enabled = true; }
        }



        private void ResetCheckbox()
            {
            if(checkBoxHold1.Checked == true)
            { checkBoxHold1.Checked = false; }
            if (checkBoxHold2.Checked == true)
            { checkBoxHold2.Checked = false; }
            if (checkBoxHold3.Checked == true)
            { checkBoxHold3.Checked = false; }
            if (checkBoxHold4.Checked == true)
            { checkBoxHold4.Checked = false; }
            if (checkBoxHold5.Checked == true)
            { checkBoxHold5.Checked = false; }
        }

        private int SpillerNr = 1;
        private int AntalSlagTilbage = 3;

        public void TurTæller()
        {
            if (AntalSlagTilbage == 0)
            {
                AntalSlagTilbage = 2;

                if (SpillerNr == 4)
                { SpillerNr = 1; }
                else {
                    SpillerNr = SpillerNr + 1;
                 }
            }
            else { AntalSlagTilbage = AntalSlagTilbage - 1;}

            if (SpillerNr == 1)
            { mitYatzy.AktivSpiller = mitYatzy._spiller1; }
            if (SpillerNr == 2)
            { mitYatzy.AktivSpiller = mitYatzy._spiller2; }
            if (SpillerNr == 3)
            { mitYatzy.AktivSpiller = mitYatzy._spiller3; }
            if (SpillerNr == 4)
            { mitYatzy.AktivSpiller = mitYatzy._spiller4; }

            textBoxVisAktivSpiller.Text = mitYatzy.AktivSpiller.Navn.ToString();
            textBoxVisKastTilbage.Text = AntalSlagTilbage.ToString();

            if (AntalSlagTilbage == 0) // dette statement gør, at man ikke kan klikke på Ryst Terninger, inden man har valgt. Dermed skifte turen på de to knapper
                DisableKastTeringer();
         }

      
        private void ClearText()
        {
            foreach (Control c in Controls)
            {
                if (c is TextBox)
                {
                    c.Text = "";
                }
                if (c is RichTextBox)
                {
                    c.Text = "";
                }
            }
            listBoxMuligheder.Items.Clear();
        }

      

        public void VisMuligheder()
        {
            listBoxMuligheder.Items.Clear();

            if (mitBaeger.PointEttere() > 0) { listBoxMuligheder.Items.Add("Ettere"); }
            if (mitBaeger.PointToere() > 0) { listBoxMuligheder.Items.Add("Toere"); }
            if (mitBaeger.PointTreere() > 0) { listBoxMuligheder.Items.Add("Treere"); }
            if (mitBaeger.PointFirere() > 0) { listBoxMuligheder.Items.Add("Firere"); }
            if (mitBaeger.PointFemmere() > 0) { listBoxMuligheder.Items.Add("Femmere"); }
            if (mitBaeger.PointSeksere() > 0) { listBoxMuligheder.Items.Add("Seksere"); }
            if (mitBaeger.PointEtPar() > 0) { listBoxMuligheder.Items.Add("Et par"); }
            if (mitBaeger.PointToPar() > 0) { listBoxMuligheder.Items.Add("To par"); }
            if (mitBaeger.PointTreEns() > 0) { listBoxMuligheder.Items.Add("Tre ens"); }
            if (mitBaeger.PointFireEns() > 0) { listBoxMuligheder.Items.Add("Fire ens"); }
            if (mitBaeger.PointFuldHus() > 0) { listBoxMuligheder.Items.Add("Fuld hus"); }
            if (mitBaeger.PointLilleTrappe() > 0) { listBoxMuligheder.Items.Add("Lille trappe"); }
            if (mitBaeger.PointStorTrappe() > 0) { listBoxMuligheder.Items.Add("Stor trappe"); }
            if (mitBaeger.PointChance() > 0) { listBoxMuligheder.Items.Add("Chance"); }
            if (mitBaeger.PointYatzy() > 0) { listBoxMuligheder.Items.Add("Yatzy"); }
            

        }

       

        public void buttonNytSpil_Click(object sender, EventArgs e)
        {
            ClearText(); //rydder alle textboxe

            mitYatzy.NytSpil(Spiller1, Spiller2, Spiller3, Spiller4); //opretter et nyt spil. Spillet crasher, hvis man trykker på kastterninger uden at have startet nyt spil
            
           

        }

        private void textBoxSumP1_TextChanged(object sender, EventArgs e)
        {
            
                      
        }

        private void buttonVaelgMulighed_Click_1(object sender, EventArgs e) // denne knap kører en switchcase på alle de muligheder, som de kastede terninger viser.
                                                                             // de angivede strings ud for case henviser til navnene på items i listBoxen
        {
            switch (listBoxMuligheder.Text)
            {
                case "Ettere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Ettere.Point = mitBaeger.PointEttere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxEttereP1.Text = Convert.ToString(mitBaeger.PointEttere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxEttereP2.Text = Convert.ToString(mitBaeger.PointEttere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxEttereP3.Text = Convert.ToString(mitBaeger.PointEttere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxEttereP4.Text = Convert.ToString(mitBaeger.PointEttere()); }
                        break;
                    }
                case "Toere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Toere.Point = mitBaeger.PointToere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxToereP1.Text = Convert.ToString(mitBaeger.PointToere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxToereP2.Text = Convert.ToString(mitBaeger.PointToere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxToereP3.Text = Convert.ToString(mitBaeger.PointToere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxToereP4.Text = Convert.ToString(mitBaeger.PointToere()); }
                        break;
                    }
                case "Treere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Treere.Point = mitBaeger.PointTreere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxTreereP1.Text = Convert.ToString(mitBaeger.PointTreere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxTreereP2.Text = Convert.ToString(mitBaeger.PointTreere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxTreereP3.Text = Convert.ToString(mitBaeger.PointTreere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxTreereP4.Text = Convert.ToString(mitBaeger.PointTreere()); }
                        break;
                    }
                case "Firere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Firere.Point = mitBaeger.PointFirere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxFirereP1.Text = Convert.ToString(mitBaeger.PointFirere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxFirereP2.Text = Convert.ToString(mitBaeger.PointFirere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxFirereP3.Text = Convert.ToString(mitBaeger.PointFirere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxFirereP4.Text = Convert.ToString(mitBaeger.PointFirere()); }
                        break;
                    }
                case "Femmere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Femmere.Point = mitBaeger.PointFemmere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxFemmereP1.Text = Convert.ToString(mitBaeger.PointFemmere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxFemmereP2.Text = Convert.ToString(mitBaeger.PointFemmere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxFemmereP3.Text = Convert.ToString(mitBaeger.PointFemmere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxFemmereP4.Text = Convert.ToString(mitBaeger.PointFemmere()); }
                        break;
                    }
                case "Seksere":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Seksere.Point = mitBaeger.PointSeksere();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxSeksereP1.Text = Convert.ToString(mitBaeger.PointSeksere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxSeksereP2.Text = Convert.ToString(mitBaeger.PointSeksere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxSeksereP3.Text = Convert.ToString(mitBaeger.PointSeksere()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxSeksereP4.Text = Convert.ToString(mitBaeger.PointSeksere()); }
                        break;
                    }
                case "Et par":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.EtPar.Point = mitBaeger.PointEtPar();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxEtParP1.Text = Convert.ToString(mitBaeger.PointEtPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxEtParP2.Text = Convert.ToString(mitBaeger.PointEtPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxEtParP3.Text = Convert.ToString(mitBaeger.PointEtPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxEtParP4.Text = Convert.ToString(mitBaeger.PointEtPar()); }
                        break;
                    }
                case "To par":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.ToPar.Point = mitBaeger.PointToPar();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxToParP1.Text = Convert.ToString(mitBaeger.PointToPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxToParP2.Text = Convert.ToString(mitBaeger.PointToPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxToParP3.Text = Convert.ToString(mitBaeger.PointToPar()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxToParP4.Text = Convert.ToString(mitBaeger.PointToPar()); }
                        break;
                    }
                case "Tre ens":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.TreEns.Point = mitBaeger.PointTreEns();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxTreEnsP1.Text = Convert.ToString(mitBaeger.PointTreEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxTreEnsP2.Text = Convert.ToString(mitBaeger.PointTreEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxTreEnsP3.Text = Convert.ToString(mitBaeger.PointTreEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxTreEnsP4.Text = Convert.ToString(mitBaeger.PointTreEns()); }
                        break;
                    }
                case "Fire ens":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.FireEns.Point = mitBaeger.PointFireEns();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxFireEnsP1.Text = Convert.ToString(mitBaeger.PointFireEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxFireEnsP2.Text = Convert.ToString(mitBaeger.PointFireEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxFireEnsP3.Text = Convert.ToString(mitBaeger.PointFireEns()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxFireEnsP4.Text = Convert.ToString(mitBaeger.PointFireEns()); }
                        break;
                    }
                case "Fuld hus":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.FuldHus.Point = mitBaeger.PointFuldHus();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxFuldtHusP1.Text = Convert.ToString(mitBaeger.PointFuldHus()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxFuldtHusP2.Text = Convert.ToString(mitBaeger.PointFuldHus()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxFuldtHusP3.Text = Convert.ToString(mitBaeger.PointFuldHus()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxFuldtHusP4.Text = Convert.ToString(mitBaeger.PointFuldHus()); }
                        break;
                    }
                case "Lille trappe":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.LilleTrappe.Point = mitBaeger.PointLilleTrappe();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxLilleTrappeP1.Text = Convert.ToString(mitBaeger.PointLilleTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxLilleTrappeP2.Text = Convert.ToString(mitBaeger.PointLilleTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxLilleTrappeP3.Text = Convert.ToString(mitBaeger.PointLilleTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxLilleTrappeP4.Text = Convert.ToString(mitBaeger.PointLilleTrappe()); }
                        break;
                    }
                case "Stor trappe":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.StorTrappe.Point = mitBaeger.PointStorTrappe();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxStorTrappeP1.Text = Convert.ToString(mitBaeger.PointStorTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxStorTrappeP2.Text = Convert.ToString(mitBaeger.PointStorTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxStorTrappeP3.Text = Convert.ToString(mitBaeger.PointStorTrappe()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxStorTrappeP4.Text = Convert.ToString(mitBaeger.PointStorTrappe()); }
                        break;
                    }
                case "Chance":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Chance.Point = mitBaeger.PointChance();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxChanceP1.Text = Convert.ToString(mitBaeger.PointChance()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxChanceP2.Text = Convert.ToString(mitBaeger.PointChance()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxChanceP3.Text = Convert.ToString(mitBaeger.PointChance()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxChanceP4.Text = Convert.ToString(mitBaeger.PointChance()); }
                        break;
                    }
                case "Yatzy":
                    {
                        mitYatzy.AktivSpiller.Kombinationer.Yatzy.Point = mitBaeger.PointYatzy();
                        if (mitYatzy.AktivSpiller == mitYatzy._spiller1)
                        { textBoxYatzyP1.Text = Convert.ToString(mitBaeger.PointYatzy()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller2)
                        { textBoxYatzyP2.Text = Convert.ToString(mitBaeger.PointYatzy()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller3)
                        { textBoxYatzyP3.Text = Convert.ToString(mitBaeger.PointYatzy()); }
                        else if (mitYatzy.AktivSpiller == mitYatzy._spiller4)
                        { textBoxYatzyP4.Text = Convert.ToString(mitBaeger.PointYatzy()); }
                        break;
                    }
            }
            AntalSlagTilbage = 0;
            ResetCheckbox();
            EnableKastTerninger();

            //neden for sætter overfører vi sum, bonus og total til GUI'en. Starter med SimpelSum
            textBoxSumP1.Text = mitYatzy._spiller1.Kombinationer.SimpelSum.ToString();
            textBoxSumP2.Text = mitYatzy._spiller2.Kombinationer.SimpelSum.ToString();
            textBoxSumP3.Text = mitYatzy._spiller3.Kombinationer.SimpelSum.ToString();
            textBoxSumP4.Text = mitYatzy._spiller4.Kombinationer.SimpelSum.ToString();

            //Bonus
            textBoxBonusP1.Text = mitYatzy._spiller1.Kombinationer.Bonus.ToString();
            textBoxBonusP2.Text = mitYatzy._spiller2.Kombinationer.Bonus.ToString();
            textBoxBonusP3.Text = mitYatzy._spiller3.Kombinationer.Bonus.ToString();
            textBoxBonusP4.Text = mitYatzy._spiller4.Kombinationer.Bonus.ToString();

            //Total
            textBoxTotalP1.Text = mitYatzy._spiller1.Kombinationer.Total.ToString();
            textBoxTotalP2.Text = mitYatzy._spiller2.Kombinationer.Total.ToString();
            textBoxTotalP3.Text = mitYatzy._spiller3.Kombinationer.Total.ToString();
            textBoxTotalP4.Text = mitYatzy._spiller4.Kombinationer.Total.ToString();

        }

        private void textBoxSumP2_TextChanged(object sender, EventArgs e)
        {
            textBoxSumP2.Text = mitYatzy._spiller2.Kombinationer.SimpelSum.ToString();
        }

        private void textBoxSumP3_TextChanged(object sender, EventArgs e)
        {
            textBoxSumP2.Text = mitYatzy._spiller2.Kombinationer.SimpelSum.ToString();
        }

        //SimpelSum overføres til textbox

    }
}
